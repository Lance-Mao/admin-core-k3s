apiVersion: v1
kind: Secret
metadata:
  name: {{ include "k3s-app.fullname" . }}-secret
  labels:
    {{- include "k3s-app.labels" . | nindent 4 }}
type: Opaque
stringData:
  # MySQL credentials
  mysql-root-password: {{ .Values.secrets.mysql.rootPassword | required "MySQL root password is required" | quote }}
  mysql-username: {{ .Values.secrets.mysql.username | default "simple_admin" | quote }}
  mysql-password: {{ .Values.secrets.mysql.password | required "MySQL password is required" | quote }}

  # JWT secret
  jwt-access-secret: {{ .Values.secrets.jwt.accessSecret | required "JWT access secret is required" | quote }}

  # Redis password (optional)
  {{- if .Values.redis.auth.enabled }}
  redis-password: {{ .Values.secrets.redis.password | quote }}
  {{- end }}
